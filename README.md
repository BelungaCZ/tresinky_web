# TÅ™eÅ¡inky Cetechovice Web Application

## Overview
Web application for TÅ™eÅ¡inky Cetechovice, featuring a gallery, contact form, and donation system.
It should run faster than 90% other webpages on mobile devices. Speed is the key.

## Features
- Responsive design for all devices
- Maximum possible speed
- Image gallery with album support
- Contact form
- Donation system
- Admin interface for gallery management
- Support for multiple image formats (JPG, JPEG, PNG, WebP, HEIC)
- Support for video files (MP4)
- Automatic image optimization and WebP conversion
- Album management with automatic cleanup of empty directories

## ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

### ðŸš€ Setup & Configuration
- **[Environment Setup](docs/environment_setup.md)** - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
- **[Deployment Guide](docs/deployment_guide.md)** - ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð´ÐµÐ¿Ð»Ð¾ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

### ðŸ’» Development  
- **[Implementation Plan](IMPLEMENTATION_PLAN.md)** - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¸ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ð¹
- **[Optimization Plan](OPTIMIZATION_PLAN.md)** - ÐšÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
- **[Changelog](CHANGELOG.md)** - Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
- **[Database Documentation](docs/database.md)** - ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### ðŸ“Š Performance & Testing
- **[Performance Metrics](PERFORMANCE_METRICS.md)** - Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð¼ÐµÑ‚Ñ€Ð¸Ðº Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
- **[Mobile Testing Guide](MOBILE_TESTING_GUIDE.md)** - Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¹ Ð½Ð° Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°Ñ…

### ðŸ“‹ Maintenance
- **[Changelog](CHANGELOG.md)** - ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð²ÐµÑ€ÑÐ¸Ð¹ Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
- **[Implementation Plan](IMPLEMENTATION_PLAN.md)** - Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑÐ¼

### ðŸ“ Documentation Structure
```
docs/
â”œâ”€â”€ README.md (Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ + Performance Testing)
â”œâ”€â”€ CHANGELOG.md (Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ + Ð½Ð¾Ð²Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ)
â”œâ”€â”€ IMPLEMENTATION_PLAN.md (Ð¿Ð»Ð°Ð½ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ + Performance Requirements)
â”œâ”€â”€ PERFORMANCE_METRICS.md (ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¼ÐµÑ‚Ñ€Ð¸Ðº + Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸ÑŽ)
â”œâ”€â”€ MOBILE_TESTING_GUIDE.md (Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ + Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ)
â”œâ”€â”€ OPTIMIZATION_PLAN.md (Ð¿Ð»Ð°Ð½ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ database.md
â”‚   â”œâ”€â”€ deployment_guide.md  
â”‚   â””â”€â”€ environment_setup.md
â””â”€â”€ scripts/
    â””â”€â”€ performance-check.sh (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)
```

## Technical Details

### Site speed
- Using fast CSS
- HTTP/2
- Casching
- Small size

### Database
- **Type**: SQLite database
- **Location**: `instance/tresinky.db` (automatically created by Flask)
- **ORM**: Flask-SQLAlchemy
- **Size**: ~32KB with current data
- **Tables**:
  - `contact_message` - Contact form submissions (name, email, message, date)
  - `gallery_image` - Image metadata (filename, title, description, dates, category, display_order)
- **Features**:
  - Automatic database initialization
  - Image metadata management
  - Contact form message storage
  - Database-filesystem synchronization
  - Comprehensive logging of all database operations
- **Development & Production**: Same SQLite configuration for both environments

### Image Processing
- Images are automatically resized and converted to WebP format
- Maintains 4:3 aspect ratio for gallery previews
- Supports multiple image formats:
  - JPG/JPEG
  - PNG
  - WebP
  - HEIC
- Video support for MP4 files
- Automatic cleanup of empty album directories

### Gallery Features
- Album-based organization
- Automatic album creation from directory uploads
- Image metadata support (title, description, date)
- Drag-and-drop upload support
- Progress indication during upload
- Real-time WebSocket updates during processing
- Responsive 4:3 aspect ratio previews
- Album management (create, edit, delete)
- Image management (edit, delete, move between albums)

### Admin Interface
- Gallery management at `/admin/gallery`
- Image upload at `/admin/upload`
- Image editing with metadata support
- Album selection and creation
- Bulk operations support
- Real-time upload progress

## Setup

### Prerequisites
- Python 3.8+
- ImageMagick
- heif-convert (for HEIC support)

### Installation
1. Clone the repository
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
3. Make the image processing script executable:
   ```bash
   chmod +x scripts/process_image.sh
   ```

### Configuration
- **Database**: SQLite automatically initialized in `instance/tresinky.db`
- **Environment**: Set via `.env` files (development/production)
- **Static files**: Configured for gallery, uploads, and cache directories
- **Upload limits**: 400MB max file size configured
- **Logging**: Comprehensive logging system in `logs/` directory

## Usage

### Gallery Management
1. Access admin interface at `/admin/gallery`
2. Upload images through `/admin/upload`
3. Edit images and metadata
4. Move images between albums
5. Delete images or entire albums

### Image Upload
1. Select or create an album
2. Upload images or entire directories
3. Add metadata (optional)
4. Monitor upload progress
5. Images are automatically processed and optimized

### Album Management
- Albums are created automatically from directory uploads
- Empty albums are automatically removed
- Images can be moved between albums
- Album names are preserved from directory names

## File Structure
```
static/
  â”œâ”€â”€ images/
  â”‚   â”œâ”€â”€ gallery/     # Processed gallery images
  â”‚   â”œâ”€â”€ hero/        # Hero images
  â”‚   â””â”€â”€ thumbnails/  # Thumbnail images
  â”œâ”€â”€ css/
  â”œâ”€â”€ js/
  â””â”€â”€ uploads/        # Temporary upload directory
instance/
  â””â”€â”€ tresinky.db     # SQLite database file
logs/
  â”œâ”€â”€ database.log    # Database operations log
  â”œâ”€â”€ upload.log      # File upload operations log
  â”œâ”€â”€ processing.log  # Image processing log
  â””â”€â”€ errors.log      # Error log
```

## Development
- Follow PEP 8 guidelines
- Use type hints
- Document all functions and classes
- Test all new features

## Security
- Secure file upload handling
- Input validation
- CSRF protection
- File type verification

## Performance
- Automatic image optimization
- WebP conversion for better compression
- Responsive image loading
- Efficient database queries

## Maintenance
- Regular cleanup of temporary files
- Automatic removal of empty albums
- Database optimization
- Log monitoring

## Contributing
1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## License
[Your License Here] 

---

## ðŸ”— Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ

- **[Environment Setup](docs/environment_setup.md)** - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
- **[Deployment Guide](docs/deployment_guide.md)** - ÐŸÐ¾ÑˆÐ°Ð³Ð¾Ð²Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð´ÐµÐ¿Ð»Ð¾ÑŽ
- **[Database Documentation](docs/database.md)** - ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†
- **[Implementation Plan](IMPLEMENTATION_PLAN.md)** - Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¸ Ð¿Ð»Ð°Ð½ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹
- **[Changelog](CHANGELOG.md)** - Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð²ÐµÑ€ÑÐ¸Ð¹ Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

## Performance Testing & Monitoring

### Ð˜Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ ÑÐ°Ð¹Ñ‚Ð°

**ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐžÐ• Ð¢Ð Ð•Ð‘ÐžÐ’ÐÐÐ˜Ð•:** ÐŸÐ¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð´Ð°, Ð²Ð»Ð¸ÑÑŽÑ‰ÐµÐ³Ð¾ Ð½Ð° Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ, Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¸Ð·Ð¼ÐµÑ€Ð¸Ñ‚ÑŒ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹.

#### Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ:

1. **Chrome DevTools Lighthouse**
   ```bash
   # Ð’ Chrome DevTools:
   # F12 â†’ Lighthouse â†’ Performance â†’ Mobile â†’ Generate Report
   ```

2. **PageSpeed Insights API**
   ```bash
   # ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
   curl "https://www.googleapis.com/pagespeed/v5/runPagespeed?url=https://your-site.com&category=performance&strategy=mobile"
   ```

3. **Web Vitals Monitoring (Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¹)**
   ```javascript
   // Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°
   WebVitals.getMetrics();
   ```

#### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ:

- **Performance Score:** > 90 (mobile), > 95 (desktop)
- **LCP (Largest Contentful Paint):** < 2.5s
- **FID (First Input Delay):** < 100ms  
- **CLS (Cumulative Layout Shift):** < 0.1

#### Workflow Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹:

1. **Ð¡Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð´Ðµ**
2. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
   - Chrome DevTools â†’ Performance
   - Network tab Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
3. **Ð˜Ð·Ð¼ÐµÑ€Ð¸Ñ‚ÑŒ Lighthouse scores** (Ð´Ð¾ Ð¸ Ð¿Ð¾ÑÐ»Ðµ)
4. **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Web Vitals** Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°
5. **Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹** Ð² [Performance Metrics](PERFORMANCE_METRICS.md)
6. **ÐŸÑ€Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ðµ Ð½Ð° production** - Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· PageSpeed Insights

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ ÑÐ¼. Ð² [Mobile Testing Guide](MOBILE_TESTING_GUIDE.md).


